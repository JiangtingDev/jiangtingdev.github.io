---
title: 跨服问题
createTime: 2024/12/18 23:10:54
permalink: /将庭文档/qmpxuxse/
---
## 跨服问题

##### （一）velocity 启用问题

实现目标：所有玩家每次上线应该首先登录主城，通过主城再前往其他子端。即使玩家在其他子端退出，重新登录也应该在主城而不是直接登录在其他子端

实现措施：所有子端必须启用对 velocity 的对接，防止玩家绕过主城，直接登录到其他子端

##### （二）死亡重生问题

实现目标：目前玩家死亡后会在死亡的子端中重生，而不是死亡后重生到主城

实现措施：暂时无需更改

##### （三）数据同步问题

实现目标：主城、家园、资源、副本的玩家数据应该同步，建筑的玩家数据单独隔离

实现措施：使用 MySQL 和 Redis 进行数据同步，经济数据由 xconomy 插件实现同步，其他数据由 Husksync 插件实现同步

##### （四）/server 指令问题

实现目标：子端间传送通过 server 指令实现，该指令应该禁用玩家的使用权限

实现措施：使用 luckperms 插件禁用在 velocity 的默认玩家权限，玩家应该通过 NPC 或者菜单传送到子端 